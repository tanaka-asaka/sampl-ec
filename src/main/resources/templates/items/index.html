<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="main">
  <div class="container contents">
    <h1>[[ ${title} ]]</h1>
    <p>ようこそ、[[ ${user.name} ]]さん。</p>
    <div class="row">
      <form class="search col-6">
        <div class="input-group">
          <input class="form-control" type="text" name="keyword" placeholder="商品名の一部を入れて検索">
          <span class="input-group-append">
            <input class="btn btn-outline-secondary" type="submit" value="検索">
          </span>
        </div>
      </form>
      
      <div id="carouselExampleSlidesOnly" class="carousel slide"
  data-ride="carousel">
  <!-- インジケータの設定 -->
  <ol class="carousel-indicators">
    <li data-target="carouselExampleSlidesOnly" data-slide-to="0"
      class="active<">"></li>
    <li data-target="carouselExampleSlidesOnly" data-slide-to="1"></li>
    <li data-target="carouselExampleSlidesOnly" data-slide-to="2"></li>
  </ol>
  <!-- スライドさせる画像の設定 -->
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="https://placehold.jp/960x300.png"
        alt="第1スライド">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="https://placehold.jp/960x300.png"
        alt="第2スライド">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="https://placehold.jp/960x300.png"
        alt="第3スライド">
    </div>
    <!-- /.carousel -->
  </div>
  <!-- /.carousel-inner -->
  <!-- スライドコントロールの設定 -->
  <a class="carousel-control-prev" href="#carouselExampleSlidesOnly"
    role="button" data-slide="prev"> <span
    class="carousel-control-prev-icon" aria-hidden="true"></span> <span
    class="sr-only">Previous</span>
  </a> <a class="carousel-control-next" href="#carouselExampleSlidesOnly"
    role="button" data-slide="next"> <span
    class="carousel-control-next-icon" aria-hidden="true"></span> <span
    class="sr-only">Next</span>
  </a>
</div>
      
    </div>
    <div class="row">
      <div class="col-3">
        <h2>メニュー</h2>
        <p>ここに各種メニューを追加してください。</p>
      </div>
      <!--/* 右側部分 */-->
      <div class="col-9">
        <div class="row">
        <div class="card col-6 item" th:each="item : ${items}">
          <div class="item_row">
            <div class="item_figure">
              <!--/* 画像にも詳細へのリンクを付ける */-->
              <a th:href="@{/items/detail/{id} (id=${item.id})}">
                <img class="img-fluid" th:src="@{/images/{image} (image=${item.image})}">
              </a>
            </div>
            <div class="item_description">
              <h2 class="item_title">
                <a th:href="@{/items/detail/{id} (id=${item.id})}">
                  <!--/* 登録して何日か以内のとき、newバッジを付ける */-->
                  [[ ${item.name} ]] <span class="badge badge-primary" th:if="item.updatedAt >= oneWeekAgo">new!</span> :
                </a>
              </h2>
              <div>[[ ${item.description} ]]</div>
              <!-- 在庫数と更新日を追加 -->
              <th:block th:if="${item.stock > 0}">
                <div>在庫 ： あと [[ ${item.stock} ]] 個です！</div>
              </th:block>
              <p>更新日 ： [[ ${#calendars.format(item.updatedAt,"yyyy/MM/dd")} ]]</p>
              <!-- 追加ここまで -->
              <th:block th:if="${item.stock > 0}">
                <p>[[ ${item.price} ]]円</p>
                <form method="post" th:action="@{/carts/add_cart/{id} (id=${item.id})}">
                  <button type="submit">カートに入れる<i class="bi bi-cart"></i></button>
                </form>
              </th:block>
              <th:block th:if="${item.stock <= 0}">
                <div class="sold_out">売り切れ</div>
              </th:block>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <footer class="text-center">
    <p><small>&copy;CodeCamp All Rights Reserved.</small></p>
  </footer>
</div>

</html>